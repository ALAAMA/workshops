#+TITLE:     Graphing in Stata
#+AUTHOR:    Ista Zahn
#+EMAIL:     dataclass@help.hmdc.harvard.edu
#+DATE:      January 25 2013

#+LaTeX_HEADER: \usepackage{tikz}
#+LaTeX_HEADER: \usepackage{minted}
#+LaTeX_HEADER: \usepackage{fancyvrb}
#+LaTeX_HEADER: \usemintedstyle{perldoc}
#+LaTeX_HEADER: \definecolor{lightgray}{gray}{0.96}
#+LaTeX_HEADER: \setlength{\tabcolsep}{1ex}
#+LaTeX_HEADER: \institute{Harvard MIT Data Center}
#+latex_header: \usetheme{Warsaw}
#+latex_header: \useoutertheme{infolines}
#+latex_header: \setbeamercolor{block body}{bg=lightgray}
#+latex_header: \titlegraphic{\includegraphics[width=.75\textwidth]{images/IQSSNewLogo.pdf}}

#+latex_header: \AtBeginSection[]{\begin{frame}<beamer>\frametitle{Topic}\tableofcontents[currentsection]\end{frame}}

#+LANGUAGE:  en
#+OPTIONS:   H:3 toc:t \n:nil @:t ::t |:t ^:t -:t f:t *:t <:t
#+EXPORT_SELECT_TAGS: export
#+EXPORT_EXCLUDE_TAGS: noexport
#+LINK_UP:   
#+LINK_HOME: 
#+startup: beamer inlineimages
#+LaTeX_CLASS: beamer
#+LaTeX_CLASS_OPTIONS: [table]
#+BEAMER_FRAME_LEVEL: 2

#+COLUMNS: %20ITEM %13BEAMER_env(Env) %6BEAMER_envargs(Args) %4BEAMER_col(Col) %7BEAMER_extra(Extra)

#+EPRESENT_FRAME_LEVEL: 2

#+PROPERTY: cache no
#+PROPERTY: exports code
#+PROPERTY: results output
#+Property: comments org
#+PROPERTY: tangle StataStatistics.do

* Setup								   :noexport:

#+LaTeX: \setbeamertemplate{blocks}[default][shadow=false]

#+name: setup-minted
#+begin_src emacs-lisp :exports none :results silent :tangle no
  (setq org-babel-stata-command "stata -q")
  (setq org-export-latex-listings 'minted)
  (setq org-export-latex-minted-options
        '(("fontsize" "\\footnotesize")))
  (setq org-latex-to-pdf-process
        '("pdflatex -shell-escape -interaction nonstopmode -output-directory %o %f"
          "pdflatex -shell-escape -interaction nonstopmode -output-directory %o %f"
          "pdflatex -shell-escape -interaction nonstopmode -output-directory %o %f"))
  
  (setq LaTeX-command "latex -shell-escape") 
  
  (add-hook 'org-babel-after-execute-hook 'org-display-inline-images)
  
  (setq org-export-latex-verbatim-wrap
       '("\\vspace{-.5em}\n \\begin{columns}\n \\column{.95\\linewidth}\n \\begin{block}{}\n \\begin{minted}[linenos=true, fontsize=\\footnotesize]{c}\n" . "\\end{minted}\n \\end{block}\n \\end{columns}\n \\vspace{.25em}\n "))
  
  (setq org-babel-min-lines-for-block-output 0)
  (setq org-export-babel-evaluate nil)
  (setq org-export-latex-minted-langs 'nil)
  (add-to-list 'org-export-latex-minted-langs '(stata "c"))
  (setq org-babel-min-lines-for-block-output 0)
#+end_src

* Introduction
#+LaTeX: \rowcolors{1}{blue!15}{blue!3}
#+LaTeX: \definecolor{bg}{rgb}{0.95,0.95,0.95}
#+LaTeX: \definecolor{cbg}{cmyk}{0,0,.1,0}

** Organization
- Please feel free to ask questions at any point if they are relevant to the current topic (or if you are lost!)
- There will be a Q&A after class for more specific, personalized questions
- Collaboration with your neighbors is encouraged
- If you are using a laptop, you will need to adjust paths accordingly
- Make comments in your Do-file rather than on hand-outs
- Save on flash drive or email to yourself

** Copy the workshop materials to your home directory

- *Log in to an Athena workstation* using your Athena user name and password

- *Click on the "Ubuntu" button* on the upper-left and type "term" as shown below
#+attr_latex: width=.8\textwidth
[[./images/OpenTerminal.png]]

- *Click on the "Terminal" icon* as shown above

- In the terminal, *type this line exactly as shown*:
#+LaTeX: {\footnotesize
: cd; wget http://tinyurl.com/stata-graphics-zip; unzip stata-graphics-zip
#+LaTeX: \normalsize}

- If you see "ERROR 404: Not Found", then you mistyped the command -- try again, making sure to type the command exactly as shown

** Launch Stata on Athena

- To start Stata *type these commands in the terminal*:
:     add stata
:     xstata
- Open up today's Stata script

  - In Stata, go to *Window => New do file => Open*

  - Locate and open the =StatGraphics.do= script in the StataStatistics folder in your home directory

- I encourage you to add your own notes to this file!

